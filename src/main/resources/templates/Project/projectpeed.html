 <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Purple Admin</title>
    <link rel="stylesheet" th:href="@{../assets/vendors/mdi/css/materialdesignicons.min.css}">
    <link rel="stylesheet" th:href="@{../assets/vendors/css/vendor.bundle.base.css}">
    <link rel="stylesheet" th:href="@{../css/Project/PJMain.css}">
    <link rel="stylesheet" th:href="@{../assets/css/style.css}">
    <link rel="shortcut icon" th:href="@{../assets/images/favicon.ico}"/>

    <!-- js -->
    <script th:src="@{/js/jquery-3.7.1.js}"></script>
    <script th:src="@{../js/Project/PJMain.js}"></script>

</head>
<body>

<div class="container-scroller">
    <th:block th:replace="~{HSF/_navbar :: navbar}"></th:block>
    <div class="container-fluid page-body-wrapper">
        <th:block th:replace="~{HSF/_sidebar :: sidebar}"></th:block>
        <div class="main-panel">
            <!-- 서브 헤더 -->
            <div class="sub-header" style="padding-bottom:0px;">
                <nav>
                    <div style="margin-left:30px; margin-top:10px; font-size: 30px;">
                        <h3 style="font-size:25px; margin-bottom:0px; padding-left:5px">
                            [[${project.projectTitle}]]
                            <i class="mdi mdi-dots-vertical"></i>
                            <code style="padding-bottom:0px; margin-left:30px; margin-top:2px">
                                [[${project.projectStartPeriod}]] ⎻ [[${project.projectEndPeriod}]]
                            </code>
                        </h3>
                        <input type="hidden" name="projectNum" th:value="${project.projectNum}" class="projectNum">
                    </div>
                    <ul class="nav-items" style="margin-bottom:0px; margin-top:12px; border-top:1px solid #ddd">
                        <li><a href="#home"><i class="mdi mdi-home"></i>&nbsp;피드</a></li>
                        <li><a href="#guide">파일</a></li>
                        <li><a href="#calendar">캘린더</a></li>
                    </ul>
                </nav>
            </div>

            <div class="content-wrapper" style="margin-top:100px">

                <!-- 프로젝트 멤버 리스트 -->
                <div class="col-3 grid-margin stretch-card" style="float:right; position: fixed; right:5%">
                    <div class="card">
                        <div class="card-body memberList" style="padding:30px">
                            <div style="margin-bottom:20px; font-weight: bold">
                                Project Members<i class="mdi mdi-account-multiple-plus" style="margin-left:15px;"></i>
                            </div>
                            <hr>
                            <div style="margin-bottom:10px;">
                                I AM
                            </div>
                            <input type="hidden" name="loginNum" th:value="${#authentication.principal.userNum}" id="loginNum" class="loginNum">
                            <div style="height: 30px; align-items:center; margin-bottom:20px">
                                <img th:src="${#authentication.principal.userProfilePicture}" alt="image" style="width:30px; height:30px; border-radius: 18px; float: left; margin-top:3px; margin-right: 20px;">
                                <div>
                                    <span class="card-title" style="font-weight: bold; font-size:14px;">
                                        [[${#authentication.principal.username}]]
                                    </span>
                                </div>
                                <p class="card-description" style="font-size:11px; margin-bottom: 5px;">
                                    [[${#authentication.principal.departmentName}]]
                                    <code style="font-size:11px" th:text="${#authentication.principal.positionName}"></code>
                                </p>
                            </div>
                            <hr>
                            <div class="UserList">
                                <th:block th:each="department, iterStat:${department}">
                                    <div id="departmentList">
                                        <div class="department">
                                            <span class="department-name" style="font-size:16px; font-weight: bold; margin-bottom:20px !important;">[[${department}]]</span>

                                            <th:block th:each="members, iterStat:${members}">
                                                <th:block th:if="${(members.getProjectMemberDepartment() == department) and (members.getProjectMemberNum() != #authentication.principal.userNum)}">
                                                    <div class="employee-list" style="margin-top:20px; margin-bottom:20px">
                                                        <div class="employee" style="height: 30px; align-items:center; margin-bottom:20px">
                                                            <div style="height: 30px; align-items:center; margin-bottom:20px">
                                                                <img th:src="${members.getProjectMemberProfile()}" alt="image" style="width:30px; height:30px; border-radius: 18px; float: left; margin-top:3px; margin-right: 20px;">
                                                                <div>
                                                                    <span class="card-title" style="font-weight: bold; font-size:14px;">
                                                                        [[${members.getProjectMemberName()}]]
                                                                    </span>
                                                                </div>
                                                                <p class="card-description" style="font-size:11px; margin-bottom: 5px;">
                                                                    [[${members.getProjectMemberDepartment()}]]
                                                                    <code style="font-size:11px" th:text="${members.getProjectMemberPosition()}"></code>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </th:block>
                                            </th:block>
                                        </div>
                                    </div>
                                    <hr>
                                </th:block>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 업무 생성버튼 -->
                <div class="col-7 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body" style="padding:15px">
                            <div style="height: 30px; display:flex; align-items:center">
                                <img th:src="${#authentication.principal.userProfilePicture}" alt="image" style="width:30px; height:30px; border-radius: 18px; float: left; margin-right: 20px;">
                                <div style="display: flex; align-items: center;">
                                </div>
                                <input type="text" readonly class="createContent" placeholder="새로운 업무를 추가하세요!" onclick="openModal()">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-7 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body" style="padding-top:30px; padding-bottom: 15px;">

                            <div style="height: 30px; align-items:center; margin-bottom:15px; height: 60px; border-bottom:1px black solid">
                                <img th:src="${#authentication.principal.userProfilePicture}" alt="image" style="width:30px; height:30px; border-radius: 18px; float: left; margin-top:3px; margin-right: 20px;">
                                <div>
                                    <span class="card-title" style="font-weight: bold; font-size:14px;">
                                        관리자3
                                    </span>
                                </div>
                                <p class="card-description" style="font-size:11px; margin-bottom: 5px;">
                                    인사부
                                    <code style="font-size:11px">사원</code>
                                </p>
                            </div>

                            <div class="work-title" style="display:block">
                                <div style="font-weight: bold; font-size:20px; padding:8px 0px">파리 여행지 추천 리스트 자료제출</div>
                            </div>
                            <hr style="margin-top:10px">

                            <div class="btn-flex">
                                <button type="button" class="btn btn-inverse-primary btn-fw workBtn type-R type-R.active">요청</button>
                                <button type="button" class="btn btn-inverse-success btn-fw workBtn">진행</button>
                                <button type="button" class="btn btn-inverse-danger btn-fw workBtn">피드백</button>
                                <button type="button" class="btn btn-inverse-warning btn-fw workBtn"  style="background-color: #fed713; color:white;">완료</button>
                                <button type="button" class="btn btn-inverse-info btn-fw workBtn">보류</button>
                            </div>
                            <hr>

                            <div>
                                <div class="chargeShel" style="display: flex">
                                    담당자 : <div class="chargeOut" style="margin-left:15px; font-weight: normal">백부장 <code> 부장 </code></div>
                                </div>

                            </div>

                            <div class="periodArea">
                                <div class="col-sm-5">
                                    <label for="startDate">Start Date:</label>
                                    <input type="date" class="form-control" name="projectStartPeriod" id="startDate" required/>
                                </div>
                                <div class="col-sm-5 endDate">
                                    <label for="endDate">End Date (Optional):</label>
                                    <input type="date" class="form-control" name="projectEndPeriod" id="endDate"/>
                                </div>
                            </div>
                            <p id="dateError" style="color:red; display:none;">프로젝트 시작 날짜는 끝나는 날짜보다 늦을 수 없습니다.</p>

<!--                            <div style="margin-top:14px; font-size:15px; font-weight: bold; display: flex; align-items: center">-->
<!--                                <i class="mdi mdi-flag-outline" style="font-size:18px;"></i> <code style="color:red"></code>-->
<!--                            </div>-->
                            <hr style="margin-top:13px">

                            <div class="workcontent">
                                3차 테스트 완료했습니다
                                <br>
                            </div>
                            <div class="content-icon" style="margin-top:15px; display: flex; justify-content: space-between; height: 25px; align-items: center" >
                                <div>
                                <i class="mdi mdi-checkbox-blank-outline" style="font-size:18px; margin-top:15px;"></i>
                                </div>
                                    <div style="color:dimgray; font-size:14px;">댓글 0</div>
                            </div>

                            <div class="comment-input" style="margin-top:20px; display: flex ">
                                <img th:src="${#authentication.principal.userProfilePicture}" alt="image" style="width:30px; height:30px; border-radius: 18px; float: left; margin-right: 20px;">
                                <input type="text" class="createContent" placeholder="댓글을 입력하세요.">
                                <button type="button" class="btn btn-inverse-success btn-icon uploadBtn" style="margin-left:10px">
                                    <i class="mdi mdi-send"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-7 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body" style="padding-top:30px; padding-bottom: 15px;">

                            <div style="height: 30px; align-items:center; margin-bottom:15px; height: 60px; border-bottom:1px black solid">
                                <img th:src="${#authentication.principal.userProfilePicture}" alt="image" style="width:30px; height:30px; border-radius: 18px; float: left; margin-top:3px; margin-right: 20px;">
                                <div>
                                    <span class="card-title" style="font-weight: bold; font-size:14px;">
                                        주선경
                                    </span>
                                </div>
                                <p class="card-description" style="font-size:11px; margin-bottom: 5px;">
                                    임원
                                    <code style="font-size:11px">대표</code>
                                </p>
                            </div>

                            <div class="work-title" style="display:block">
                                <div style="font-weight: bold; font-size:20px; padding:8px 0px">파리 여행지 추천 리스트 자료제출</div>
                            </div>
                            <hr style="margin-top:10px">

                            <div class="btn-flex">
                                <button type="button" class="btn btn-inverse-primary btn-fw workBtn type-R type-R.active" style="background-color:#b66dff; color:white;">요청</button>
                                <button type="button" class="btn btn-inverse-success btn-fw workBtn">진행</button>
                                <button type="button" class="btn btn-inverse-danger btn-fw workBtn">피드백</button>
                                <button type="button" class="btn btn-inverse-warning btn-fw workBtn">완료</button>
                                <button type="button" class="btn btn-inverse-info btn-fw workBtn">보류</button>
                            </div>
                            <hr>

                            <div>
                                <div class="chargeShel" style="display: flex">
                                    담당자 : <div class="chargeOut" style="margin-left:15px; font-weight: normal">김동규 <code> 부장 </code></div>
                                </div>

                            </div>

                            <div class="periodArea">
                                <div class="col-sm-5">
                                    <label for="startDate">Start Date:</label>
                                    <input type="date" class="form-control" name="projectStartPeriod" id="startDate" required/>
                                </div>
                                <div class="col-sm-5 endDate">
                                    <label for="endDate">End Date (Optional):</label>
                                    <input type="date" class="form-control" name="projectEndPeriod" id="endDate"/>
                                </div>
                            </div>
                            <p id="dateError" style="color:red; display:none;">프로젝트 시작 날짜는 끝나는 날짜보다 늦을 수 없습니다.</p>

                            <div style="margin-top:14px; font-size:15px; font-weight: bold; display: flex; align-items: center">
                                <i class="mdi mdi-flag-outline" style="font-size:18px;"></i> <code style="color:red">긴급</code>
                            </div>
                            <hr style="margin-top:13px">

                            <div class="workcontent">
                                업무내용
                                <br>
                            </div>
                            <div class="content-icon" style="margin-top:15px; display: flex; justify-content: space-between; height: 25px; align-items: center" >
                                <div>
                                    <i class="mdi mdi-checkbox-blank-outline" style="font-size:18px; margin-top:15px;"></i>
                                </div>
                                <div style="color:dimgray; font-size:14px;">댓글 0</div>
                            </div>

                            <div class="comment-input" style="margin-top:20px; display: flex ">
                                <img th:src="${#authentication.principal.userProfilePicture}" alt="image" style="width:30px; height:30px; border-radius: 18px; float: left; margin-right: 20px;">
                                <input type="text" class="createContent" placeholder="댓글을 입력하세요.">
                                <button type="button" class="btn btn-inverse-success btn-icon uploadBtn" style="margin-left:10px">
                                    <i class="mdi mdi-send"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>



            </div>
        </div>
    </div>
</div>

<div id="myModal" class="modal">
    <div class="modal-content">
        <div class="create-Work">
            <p class="modal-head">New Work!</p>
        </div>
        <form class="forms-sample" action="add" method="post" enctype="multipart/form-data" id="writeForm">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <ul class="work-modal-item" style="margin-bottom:0px; margin-top:12px; border-top:1px solid #ddd">

                <li><i class="mdi mdi-lead-pencil"></i>&nbsp;&nbsp;글</li>
                <li><i class="mdi mdi-calendar-multiple" style="margin-right:8px;"></i>업무</li>
                <li><i class="mdi mdi-checkbox-marked-outline"></i> do</li>
                <li>일정</li>
            </ul>

            <div class="work-title">
                <input type="text" class="work-title-input" name="projectPeedTitle" placeholder="제목을 입력하세요!" required>
            </div>
            <hr style="margin-top:10px">

            <div class="btn-flex">
                <button type="button" class="btn btn-inverse-primary btn-fw workBtn typeBtn type-R">요청</button>
                <button type="button" class="btn btn-inverse-success btn-fw workBtn typeBtn type-Pr">진행</button>
                <button type="button" class="btn btn-inverse-info btn-fw workBtn typeBtn type-P">피드백</button>
                <button type="button" class="btn btn-inverse-warning btn-fw workBtn typeBtn type-S">완료</button>
                <button type="button" class="btn btn-inverse-danger btn-fw workBtn typeBtn type-D">보류</button>
                <input type="hidden" name="projectPeedType" id="peedtype">
            </div>
            <hr>
            <div style="font-weight: bold; margin-bottom:12px;">
                Options
            </div>
            <div>
                <div class="chargeShel" style="display: flex; align-items: center">
                    <div class="charger">담당자 </div><div class="putcharge" style="margin-left:20px; color:palevioletred"></div>
                    <input type="text" placeholder="담당자를 추가하세요." class="chargeIn" name="projectPeedCharge">
                </div>

            </div>

            <div class="periodArea">
                <div class="col-sm-5">
                    <label for="startDate">Start Date:</label>
                    <input type="date" class="form-control" name="projectPeedStartPeriod" id="startDate"/>
                </div>
                <div class="col-sm-5 endDate">
                    <label for="endDate">End Date (Optional):</label>
                    <input type="date" class="form-control" name="projectPeedEndPeriod" id="endDate"/>
                </div>
            </div>
            <p id="dateError" style="color:red; display:none;">프로젝트 시작 날짜는 끝나는 날짜보다 늦을 수 없습니다.</p>

            <div style="margin-top:14px; font-size:15px; font-weight: bold; display: flex; align-items: center">
                <i class="mdi mdi-flag-outline" style="font-size:18px;"></i> 우선순위
            </div>
            <hr style="margin-top:13px">

            <textarea class="workcontent" rows="10" placeholder="내용을 입력하세요!" style="width:100%; overflow: auto;"></textarea>
            <hr>

            <div class="last-btngroup">
                <div class="btn-group" style="width:70px;">
                    <button type="button"
                            class="btn btn-secondary btn-fw workBtn"
                            data-bs-toggle="dropdown">전체보기
                    </button>
                    <div class="dropdown-menu scope" style="width:60px !important;">
                        <a class="dropdown-item scope">전체보기</a>
                        <a class="dropdown-item scope">나만보기</a>
                        <a class="dropdown-item scope">프로젝트 관리자만</a>
                    </div>
                </div>
                <div>
                    <button type="button" class="btn btn-success btn-icon uploadBtn">
                        <i class="mdi mdi-upload"></i>
                    </button>
                    <button type="button" class="btn btn-danger btn-fw workBtn">등록</button>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="chargeList">
    <th:block th:each="member, iterStat:${members}">
        <div class="chargeitem">
            <input type='hidden' class='choiceChargeNum' th:value='${member.getProjectMemberNum()}'>
            <div class='chargerName'>[[${member.getProjectMemberName()}]]</div>
            <span style="color:#878787; margin-left: 15px;">
                [[${member.getProjectMemberDepartment()}]]
            </span>
            <code>
                [[${member.getProjectMemberPosition()}]]
            </code>
        </div>
    </th:block>
</div>
<script th:src="@{../assets/vendors/js/vendor.bundle.base.js}"></script>
<script th:src="@{../assets/js/off-canvas.js}"></script>
<script th:src="@{../assets/js/hoverable-collapse.js}"></script>
<script th:src="@{../assets/js/misc.js}"></script>
<script th:src="@{../assets/js/file-upload.js}"></script>


</body>
</html>